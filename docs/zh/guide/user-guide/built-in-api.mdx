# 内置 API

> 全局变量 `QLAPI` 是内置 API 的入口

## 方法

### 1. getEnvs
**描述**: 获取环境变量列表

**请求参数 (GetEnvsRequest)**

| 字段 | 类型 | 必填 | 描述 |
|-----|------|-----|------|
| searchValue | string | 是 | 搜索关键词 |

**响应 (EnvsResponse)**

| 字段 | 类型 | 描述 |
|-----|------|------|
| code | int32 | 响应代码 |
| data | EnvItem[] | 环境变量列表 |
| message | string | 响应消息 |

### 2. createEnv
**描述**: 创建新环境变量

**请求参数 (CreateEnvRequest)**

| 字段 | 类型 | 必填 | 描述 |
|-----|------|-----|------|
| envs | EnvItem[] | 是 | 要创建的环境数组 |

**响应 (EnvsResponse)**

| 字段 | 类型 | 描述 |
|-----|------|------|
| code | int32 | 响应代码 |
| data | EnvItem[] | 创建的环境列表 |
| message | string | 响应消息 |

### 3. updateEnv
**描述**: 更新现有环境变量

**请求参数 (UpdateEnvRequest)**

| 字段 | 类型 | 必填 | 描述 |
|-----|------|-----|------|
| env | EnvItem | 是 | 要更新的环境 |

**响应 (EnvResponse)**

| 字段 | 类型 | 描述 |
|-----|------|------|
| code | int32 | 响应代码 |
| data | EnvItem | 更新后的环境 |
| message | string | 响应消息 |

### 4. deleteEnvs
**描述**: 删除指定环境变量

**请求参数 (DeleteEnvsRequest)**

| 字段 | 类型 | 必填 | 描述 |
|-----|------|-----|------|
| ids | int32[] | 是 | 要删除的环境 ID 数组 |

**响应 (Response)**

| 字段 | 类型 | 描述 |
|-----|------|------|
| code | int32 | 响应代码 |
| message | string | 响应消息 |

### 5. moveEnv
**描述**: 移动环境变量位置

**请求参数 (MoveEnvRequest)**

| 字段 | 类型 | 必填 | 描述 |
|-----|------|-----|------|
| id | int32 | 是 | 环境 ID |
| fromIndex | int32 | 是 | 原始位置 |
| toIndex | int32 | 是 | 目标位置 |

**响应 (EnvResponse)**

| 字段 | 类型 | 描述 |
|-----|------|------|
| code | int32 | 响应代码 |
| data | EnvItem | 移动后的环境 |
| message | string | 响应消息 |

### 6. disableEnvs
**描述**: 禁用指定环境变量

**请求参数 (DisableEnvsRequest)**

| 字段 | 类型 | 必填 | 描述 |
|-----|------|-----|------|
| ids | int32[] | 是 | 要禁用的环境 ID 数组 |

**响应 (Response)**

| 字段 | 类型 | 描述 |
|-----|------|------|
| code | int32 | 响应代码 |
| message | string | 响应消息 |

### 7. enableEnvs
**描述**: 启用指定环境变量

**请求参数 (EnableEnvsRequest)**

| 字段 | 类型 | 必填 | 描述 |
|-----|------|-----|------|
| ids | int32[] | 是 | 要启用的环境 ID 数组 |

**响应 (Response)**

| 字段 | 类型 | 描述 |
|-----|------|------|
| code | int32 | 响应代码 |
| message | string | 响应消息 |

### 8. updateEnvNames
**描述**: 更新指定环境变量的名称

**请求参数 (UpdateEnvNamesRequest)**

| 字段 | 类型 | 必填 | 描述 |
|-----|------|-----|------|
| ids | int32[] | 是 | 环境 ID 数组 |
| name | string | 是 | 要设置的新名称 |

**响应 (Response)**

| 字段 | 类型 | 描述 |
|-----|------|------|
| code | int32 | 响应代码 |
| message | string | 响应消息 |

### 9. getEnvById
**描述**: 通过 ID 获取环境变量

**请求参数 (GetEnvByIdRequest)**

| 字段 | 类型 | 必填 | 描述 |
|-----|------|-----|------|
| id | int32 | 是 | 环境 ID |

**响应 (EnvResponse)**

| 字段 | 类型 | 描述 |
|-----|------|------|
| code | int32 | 响应代码 |
| data | EnvItem | 环境详情 |
| message | string | 响应消息 |

### 10. systemNotify
**描述**: 发送系统通知

**请求参数 (SystemNotifyRequest)**

| 字段 | 类型 | 必填 | 描述 |
|-----|------|-----|------|
| title | string | 是 | 通知标题 |
| content | string | 是 | 通知内容 |
| notificationInfo | object | 否 | 可选通知配置（不填则使用系统默认配置） |

#### notificationInfo 子字段说明
| 字段 | 类型 | 描述 |
|-----|------|------|
| type | NotificationMode | 通知方式类型（枚举值，具体取值见下文说明） |
| gotifyUrl | string | Gotify 通知（type=gotify时有效）：Gotify 服务地址（如：http://localhost:8080） |
| gotifyToken | string | Gotify 通知（type=gotify时有效）：Gotify 应用令牌（必填） |
| gotifyPriority | number | Gotify 通知（type=gotify时有效）：消息优先级（0-10，默认5） |
| goCqHttpBotUrl | string | Go-CQHttp QQ 机器人（type=goCqHttpBot时有效）：Go-CQHttp 服务地址（如：http://localhost:5700） |
| goCqHttpBotToken | string | Go-CQHttp QQ 机器人（type=goCqHt
| code | int32 | 响应代码 |
| message | string | 响应消息 |

## 数据结构

### NotificationMode
通知方式类型枚举值：

| 枚举值 | 描述 |
|-------|------|
| gotify | Gotify 通知 |
| goCqHttpBot | Go-CQHttp QQ 机器人 |
| serverChan | Server 酱 |
| pushDeer | PushDeer |
| bark | Bark |
| chat | 通用聊天通知 |
| telegramBot | Telegram 机器人 |
| dingtalkBot | 钉钉机器人 |
| weWorkBot | 企业微信机器人 |
| weWorkApp | 企业微信应用 |
| aibotk | Aibotk 通知 |
| iGot | iGot 推送 |
| pushPlus | PushPlus 推送 |
| wePlusBot | WePlus 机器人 |
| email | 邮件通知 |
| pushMe | PushMe 推送 |
| feishu | 飞书通知 |
| webhook | Webhook 通知 |
| chronocat | Chronocat 通知 |
| ntfy | Ntfy 通知 |
| wxPusherBot | 微信推送机器人 |

### EnvItem

| 字段 | 类型 | 必填 | 描述 |
|-----|------|-----|------|
| id | int32 | 否 | 环境变量 ID |
| name | string | 否 | 环境变量名称 |
| value | string | 否 | 环境变量值 |
| remarks | string | 否 | 备注 |
| status | int32 | 否 | 状态 |
| position | int32 | 否 | 位置 |

## 调用示例

### nodejs

```javascript
// 获取环境列表
QLAPI.getEnvs({ searchValue: 'dddd' }).then((x) => {
  console.log('getEnvs', x);
});
```

### python

```python
# 获取环境列表
print(QLAPI.getEnvs({ "searchValue": "dddd" }))
```
